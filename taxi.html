<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>&#128662;</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  </head>
  <body onload="calcularPrecio()">
    <div class="container-fluid">

      <div class="input-group m-3" style="width: auto;">
        <button class="btn btn-secondary" type="button" onclick="document.querySelector('#kmRecorridos').value = 0; calcularPrecio();">&#128661;</button>
          <input type="number" id="kmRecorridos" name="kmRecorridos" value="1" step="0.1" min="0" onclick="calcularPrecio()" class="form-control col-sm-10" aria-label="kilómetros de la carrera">
        <span class="input-group-text">km</span>
      </div>

      <div class="input-group m-3" style="width: auto;">
        <button class="btn btn-secondary" type="button" onclick="document.querySelector('#minEspera').value = 0; calcularPrecio();">&#9201;</button>
          <input type="number" id="minEspera" name="minEspera" value="5" step="1" min="0" onclick="calcularPrecio()" class="form-control col-sm-10" aria-label="minutos de espera">
        <span class="input-group-text">min.</span>
      </div>

      <div class="row m-3 align-items-center">
      <div class="col-auto form-check form-check-inline form-switch">
        <input class="form-check-input" type="checkbox" id="recogida" name="recogida" onclick="calcularPrecio()">
        <label class="form-check-label" for="recogida">&#128222; <small class="badge bg-danger">+ 1,75 €</small></label>
      </div>

      <div class="col-auto form-check form-check-inline form-switch">
        <input class="form-check-input" type="checkbox" id="noche" name="noche" onclick="calcularPrecio()">
        <label class="form-check-label" for="noche">&#9790; <small class="badge bg-danger">+ 2,30 €</small></label>
      </div>

      <div class="col-auto form-check form-check-inline form-switch">
        <input class="form-check-input" type="checkbox" id="finde" name="finde" onclick="toggleBars()">
        <label class="form-check-label" for="finde"> <small class="badge bg-danger">Fin de Semana</small> </label>
      </div>
      </div>

      <div id="barSemana">
        <div class="progress m-3"  style="height: auto;">
          <div class="progress-bar bg-warning" role="progressbar" style="width: 29.17%" aria-valuenow="29.17" aria-valuemin="0" aria-valuemax="100"><h2>T2</h2><h3><span class="badge bg-dark" id="st2"></span></h3></div>
          <div class="progress-bar bg-success" role="progressbar" style="width: 58.33%" aria-valuenow="58.33" aria-valuemin="0" aria-valuemax="100"><h2>T1</h2><h3><span class="badge bg-dark" id="st1"></span></h3></div>
          <div class="progress-bar bg-warning" role="progressbar" style="width: 12.50%" aria-valuenow="12.50" aria-valuemin="0" aria-valuemax="100"><h2>T2</h2><h3><span class="badge bg-dark" id="st2"></span></h3></div>
        </div>

        <div class="progress m-3"  style="height: auto;">
          <div class="progress-bar" role="progressbar" style="width: 29.17%; background-color: grey" aria-valuenow="29.17" aria-valuemin="0" aria-valuemax="100"><h6>T2.T7</h6><h6><span class="badge bg-dark" id="st2t7"></span></h6></div>
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 4.17%; background-color: grey" aria-valuenow="4.17" aria-valuemin="0" aria-valuemax="100"><h6>T1.T7</h6><h6><span class="badge bg-dark" id="st1t7"></span></h6></div>
          <div class="progress-bar" role="progressbar" style="width: 50%; background-color: grey" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><h6>T1.T6</h6><h6><span class="badge bg-dark" id="st1t6"></span></h6></div>
          <div class="progress-bar progress-bar-striped" role="progressbar" style="width: 4.17%; background-color: grey" aria-valuenow="4.17" aria-valuemin="0" aria-valuemax="100"><h6>T1.T7</h6><h6><span class="badge bg-dark" id="st1t7"></span></h6></div>
          <div class="progress-bar" role="progressbar" style="width: 12.50%; background-color: grey" aria-valuenow="12.50" aria-valuemin="0" aria-valuemax="100"><h6>T2.T7</h6><h6><span class="badge bg-dark" id="st2t7"></span></h6></div>
        </div>

        <div class="progress m-3"  style="height: auto;">
          <div class="progress-bar bg-info" role="progressbar" style="width: 33.33%" aria-valuenow="33.33" aria-valuemin="0" aria-valuemax="100"><h2>T7</h2><h3><span class="badge bg-dark" id="st7"></span></h3></div>
          <div class="progress-bar" role="progressbar" style="width: 50%; background-color: orange" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"><h2>T6</h2><h3><span class="badge bg-dark" id="st6"></span></h3></div>
          <div class="progress-bar bg-info" role="progressbar" style="width: 16.66%" aria-valuenow="16.66" aria-valuemin="0" aria-valuemax="100"><h2>T7</h2><h3><span class="badge bg-dark" id="st7"></span></h3></div>
        </div>
      </div>

      <div id="barFindesemana" style="display:none;">
        <div class="progress m-3"  style="height: auto;">
          <div class="progress-bar bg-warning" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><h2>T2</h2><h3><span class="badge bg-dark" id="st2"></span></h3></div>
        </div>

        <div class="progress m-3"  style="height: auto;">
          <div class="progress-bar" role="progressbar" style="width: 100%; background-color: grey" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><h6>T2.T7</h6><h6><span class="badge bg-dark" id="st2t7"></span></h6></div>
        </div>

        <div class="progress m-3"  style="height: auto;">
          <div class="progress-bar bg-info" role="progressbar" style="width: 100%" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100"><h2>T7</h2><h3><span class="badge bg-dark" id="st7"></span></h3></div>
        </div>
      </div>

  </div>
  <script>

      function toggleBars(){
        var x = document.getElementById("barSemana");
        if (x.style.display === "none") {
          x.style.display = "block";
        } else {
          x.style.display = "none";
        }

        var y = document.getElementById("barFindesemana");
        if (y.style.display === "none") {
          y.style.display = "block";
        } else {
          y.style.display = "none";
        }
      }

      function calcularPrecio() {
        const kmRecorridos = document.getElementById("kmRecorridos").value;
        const minEspera = document.getElementById("minEspera").value;
        const recogida = document.getElementById("recogida").checked;
        const noche = document.getElementById("noche").checked;
        let t1 = Math.round((3.25 + (1.26 * kmRecorridos) + (22.08/60 * minEspera) + recogida * 1.75) * 20) / 20;
        let t2 = Math.round((3.35 + (1.38 * kmRecorridos) + (23.04/60 * minEspera) + recogida * 1.75 + noche * 2.30) * 20) / 20;
        let t6 = Math.round((Math.max(6.75,6.75 + (1.52 * (kmRecorridos - 3.29915) + (20.77/60 * minEspera))) + recogida * 1.75) * 20) / 20;
        let t7 = Math.round((Math.max(7.35,7.35 + (1.62 * (kmRecorridos - 2.74929) + (22.47/60 * minEspera))) + recogida * 1.75) * 20) / 20;
        let t1t6 = Math.round((3.25 + (1.52 * kmRecorridos) + (20.77/60 * minEspera) + recogida * 1.75) * 20) / 20;
        let t1t7 = Math.round((3.25 + (1.62 * kmRecorridos) + (22.47/60 * minEspera) + recogida * 1.75) * 20) / 20;
        let t2t7 = Math.round((3.35 + (1.62 * kmRecorridos) + (22.47/60 * minEspera) + recogida * 1.75 + noche * 2.30) * 20) / 20;
        let precioFinal = 0;

        document.querySelectorAll('#st1').forEach( (x) => { x.textContent = t1.toFixed(2) + "€" } );
        document.querySelectorAll('#st2').forEach( (x) => { x.textContent = t2.toFixed(2) + "€" } );
        document.querySelectorAll('#st6').forEach( (x) => { x.textContent = t6.toFixed(2) + "€" } );
        document.querySelectorAll('#st1t6').forEach( (x) => { x.textContent = t1t6.toFixed(2) + "€" } );
        document.querySelectorAll('#st7').forEach( (x) => { x.textContent = t7.toFixed(2) + "€" } );
        document.querySelectorAll('#st2t7').forEach( (x) => { x.textContent = t2t7.toFixed(2) + "€" } );
        document.querySelectorAll('#st1t7').forEach( (x) => { x.textContent = t1t7.toFixed(2) + "€" } );

        document.getElementById("precioFinal").value = precioFinal.toFixed(2) + " €";
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
